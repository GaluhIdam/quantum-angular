<shared-skeleton [active]="loading">
  <!-- SIMPLE UTILITY TABLE  -->
  <shared-table-utility-simple
    [nextPrevBtn]="!checkFilter()"
    [startDate]="startDate"
    [endDate]="endDate"
    [duration]="hourMinute"
    (btnAction)="btnActionUtil($event)"
  />
  <!-- SIMPLE UTILITY TABLE  -->

  <!-- FILTER APPLIED -->
  <shared-filter-applied
    class="mb-15"
    [filterApplied]="filterApplied"
    (action)="clearAllFilterOut($event)"
  />
  <!-- FILTER APPLIED -->

  <!-- MATTER MOVE -->
  <shared-move-matter
    *ngIf="timesheetSelected.length > 0"
    [listMatters]="listMatters"
    [timesheetSelected]="timesheetSelected"
    (action)="actionMoveTimesheet($event)"
  />
  <!-- MATTER MOVE -->

  <div class="wrap">
    <!-- TABLE WITHOUT FILTER -->
    <app-table-without-filter
      *ngIf="!checkFilter()"
      [dateTimesheetByDate]="dateTimesheetByDate"
      [timesheetSelected]="timesheetSelected"
      (timesheetSelectedOut)="timesheetSelectedOut($event)"
      (action)="actionTableFilter($event)"
    />
    <!-- TABLE WITHOUT FILTER -->

    <!-- TABLE WITH FILTER-->
    <app-table-filter
      class="container-table"
      *ngIf="checkFilter()"
      [page]="page"
      [limit]="limit"
      [totalItems]="totalItems"
      [dataTimesheet]="dataTimesheet"
      [timesheetSelected]="timesheetSelected"
      (onPageChangeOut)="onPageChangeOut($event)"
      (timesheetSelectedOut)="timesheetSelectedOut($event)"
      (action)="actionTableFilter($event)"
    />
    <!-- TABLE WITH FILTER-->
  </div>
</shared-skeleton>

<!-- FLYOUT CREATE TIMESHEET -->
<shared-flyout-timesheet
  [showFeeEarnerForm]="false"
  [title]="'Add Timesheet'"
  [isOpenFlyout]="isOpenCreateFlyout"
  (closeOut)="closeOutCreate($event)"
/>
<!-- FLYOUT CREATE TIMESHEET -->

<!-- EDIT TIMESHEET FLYOUT -->
<shared-flyout-timesheet
  [showFeeEarnerForm]="false"
  [enableMatterForm]="false"
  [timesheet]="timesheetEditSelected"
  [title]="'Update Timesheet'"
  [isOpenFlyout]="isOpenEditFlyout"
  [actionButton]="'update'"
  [showCheckLockMatter]="false"
  [showCheckLockDate]="false"
  [note]="'* Conduct desk research & prepare summary on licensing regulation.'"
  (closeOut)="closeOutEdit($event)"
/>
<!-- EDIT TIMESHEET FLYOUT -->

<!-- EDIT TAG FLYOUT -->
<shared-flyout-timesheet
  [showFeeEarnerForm]="false"
  [enableMatterForm]="false"
  [timesheet]="timesheetEditSelected"
  [title]="'Update Timesheet'"
  [isOpenFlyout]="isOpenEditTagFlyout"
  [actionButton]="'updateTag'"
  [showCheckLockMatter]="false"
  [showCheckLockDate]="false"
  [note]="'* Conduct desk research on licensing agreement with JJ.'"
  (closeOut)="closeOutEditTag($event)"
/>
<!-- EDIT TAG FLYOUT -->

<!-- FILTER TIMESHEET  -->
<shared-flyout-simple
  [isOpenFlyout]="openFlyoutFilter"
  [titleFlyout]="'Filter'"
  (closeOut)="closeOutFilter($event)"
>
  <div body>
    <!-- DATE FORM  -->
    <div class="form">
      <fui-text [size]="'sizes'">Date</fui-text>
      <div class="time-description">
        <fui-date-range
          [dateFormat]="'DD-MM-YYYY'"
          [startDateControl]="startDateForm"
          [endDateControl]="endDateForm"
          (onChangeStartDate)="changeDateForm($event, 'start')"
          (onChangeEndDate)="changeDateForm($event, 'end')"
        />
      </div>
      <span
        class="filter-valid"
        *ngIf="startDateForm.value === '' || endDateForm.value === ''"
      >
        <fui-icons [icon]="'iInCircle'" [color]="'danger'" [size]="'sizes'" />
        Date range is required!
      </span>
      <span class="filter-valid" *ngIf="invalidStartEndDate()">
        <fui-icons [icon]="'iInCircle'" [color]="'danger'" [size]="'sizes'" />
        the start date cannot exceed the end date!
      </span>
    </div>
    <!-- DATE FORM  -->

    <!-- MATTER FORM  -->
    <div class="form">
      <fui-text [size]="'sizes'">Matter</fui-text>
      <div class="time-description">
        <fui-combo-box
          (selection)="selectionMatter($event)"
          [comboxForm]="searchMatterForm"
          [size]="'m'"
          [placeholder]="'Matter'"
          [optionValue]="optionMatter"
          [selectedValue]="selectedMatter"
        />
      </div>
    </div>
    <!-- MATTER FORM  -->

    <hr class="line-hr" />

    <!-- DESC FORM  -->
    <div class="form">
      <fui-text [size]="'sizes'">Time Description</fui-text>
      <div class="time-description">
        <fui-form-control-layout>
          <fui-input-field
            [formControlField]="descriptionForm"
            [placeholder]="'e.g Meeting with client'"
            [type]="'text'"
            [size]="'m'"
            [invalid]="false"
          />
        </fui-form-control-layout>
      </div>
    </div>
    <!-- DESC FORM  -->
  </div>

  <!-- FOOTER FLYOUT FILTER  -->
  <div class="footer-flyout" footer>
    <fui-button-icon
      [type]="'button'"
      [option]="'text'"
      [style]="'secondary'"
      [text]="'Cancel'"
      [size]="'m'"
      [color]="'text'"
      (onClick)="cancelFilter()"
    />
    <div class="group-flex">
      <fui-button-icon
        [type]="'button'"
        [option]="'text'"
        [style]="'secondary'"
        [text]="'Clear Filter'"
        [size]="'m'"
        [color]="'text'"
        (onClick)="resetFilter()"
      />
      <fui-button-icon
        [type]="'button'"
        [option]="'iconText'"
        [style]="'filled'"
        [text]="'Apply Filter'"
        [size]="'m'"
        [color]="'primary'"
        [icon]="'filter'"
        (onClick)="actionFilter($event)"
      />
    </div>
  </div>
  <!-- FOOTER FLYOUT FILTER  -->
</shared-flyout-simple>
<!-- FILTER TIMESHEET  -->

<!-- MODAL DELETE  -->
<shared-modal-delete
  [openModalDelete]="isModalDelete"
  [title]="'Delete Timesheet'"
  (action)="actionModal($event)"
/>
<!-- MODAL DELETE  -->

<!-- TOAST -->
<fui-toast />
<!-- TOAST -->
